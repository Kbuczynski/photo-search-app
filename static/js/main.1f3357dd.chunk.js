(this["webpackJsonpphoto-search-app"]=this["webpackJsonpphoto-search-app"]||[]).push([[0],{39:function(e,t,c){},62:function(e,t,c){},63:function(e,t,c){},65:function(e,t,c){},66:function(e,t,c){},67:function(e,t,c){},68:function(e,t,c){},69:function(e,t,c){"use strict";c.r(t);var n=c(0),a=c(1),s=c.n(a),o=c(30),r=c.n(o),i=c(33),u=c(9),l=c(3),j="https://api.datamuse.com",h="/search/photos/",b="/photos/",d=1300,_=620,O={flower:"flower",wallpapers:"wallpapers",backgrounds:"backgrounds",happy:"happy",love:"love"},p=c(2),f=(c(39),function(e){var t=e.inputValue,c=Object(a.useRef)();return Object(a.useEffect)((function(){var e=c.current;return t.length>0?e.classList.add("show"):e.classList.remove("show"),function(){e.classList.remove("show")}}),[t]),Object(n.jsx)("button",{type:"reset",className:"search__reset",ref:c,onClick:function(){c.current.classList.remove("show")},title:"Clear",children:Object(n.jsx)("i",{className:"icon-cancel"})})});f.defaultProps={inputValue:""};var m=f,g=function(){return Object(n.jsx)("button",{type:"submit",className:"search__send",title:"Search photos",children:Object(n.jsx)("i",{className:"icon-search"})})},x=c(12),v=c.n(x),y=Object(l.f)((function(e){var t=e.history,c=e.suggestion,a=e.setInputValue;return Object(n.jsx)("li",{className:"search__box__suggestions__item",onClick:function(){"no suggestions"!==c&&(a(c),t.push("/photos/".concat(c)))},children:c})}));y.defaultProp={suggestion:"no suggestions",setInputValue:function(){}};var N=y,w=function(e){var t=e.inputValue,c=e.isGray,s=e.setInputValue,o=e.show,r=Object(a.useState)({}),i=Object(p.a)(r,2),u=i[0],l=i[1],h=Object(a.useState)(0),b=Object(p.a)(h,2),d=b[0],_=b[1];return Object(a.useEffect)((function(){if(t.length>0){var e=setTimeout((function(){v.a.get("".concat(j,"/sug?s=").concat(t,"&max=4")).then((function(e){l(e)}))}),1e3);_(e)}return function(){l({}),clearTimeout(d)}}),[t]),Object(n.jsx)("ul",{className:"search__box__suggestions ".concat(c&&"search__box__suggestions--gray"," ").concat(o&&"show"),children:Object.keys(u).length>0&&u.data.length>0?u.data.map((function(e){var t=e.word;return Object(n.jsx)(N,{suggestion:t,setInputValue:s},t)})):Object(n.jsx)(N,{suggestion:"no suggestions"})})};w.defaultProp={inputValue:"",isGray:!1,setInputValue:function(){},show:!1};var S=w,k=Object(l.f)((function(e){var t=e.history,c=e.query,s=e.isGray,o=void 0!==s&&s,r=Object(a.useState)(c),i=Object(p.a)(r,2),u=i[0],l=i[1],j=Object(a.useState)(window.innerWidth),h=Object(p.a)(j,2),b=h[0],d=h[1],O=Object(a.useRef)(),f=Object(a.useState)(!1),x=Object(p.a)(f,2),v=x[0],y=x[1];window.addEventListener("resize",(function(){d(window.innerWidth)})),Object(a.useEffect)((function(){l(c)}),[c]);return Object(n.jsxs)("form",{className:"search ".concat(o&&"search--gray"),onSubmit:function(e){e.preventDefault(),u.length>0&&(y(!1),t.push("/photos/".concat(u)))},onReset:function(){O.current.focus(),l("")},children:[Object(n.jsx)(g,{}),Object(n.jsxs)("div",{className:"search__box",children:[Object(n.jsx)("input",{className:"search__box__input ".concat(o&&"search--gray"),type:"text",autoComplete:"off",placeholder:_<b?"Search free high-resolution photos":"Search photos",ref:O,value:u,onInput:function(e){var t=e.target;v||y(!0),l(t.value)},onFocus:function(){y(!0)},onBlur:function(){y(!1)}}),Object(n.jsx)(S,{inputValue:u,setInputValue:l,isGray:o,show:v})]}),Object(n.jsx)(m,{inputValue:u,setInputValue:l})]})}));k.defaultProps={query:"",isGray:!1};var V=k,E=(c(62),function(){return Object(n.jsx)("div",{className:"main",children:Object(n.jsxs)("div",{className:"main__container",children:[Object(n.jsxs)("section",{className:"main__container__header",children:[Object(n.jsx)("h1",{className:"main__container__header__title",children:"Unsplash"}),Object(n.jsxs)("p",{className:"main__container__header__text",children:["The internet's source of"," ",Object(n.jsx)("a",{className:"main__container__header__text__link",href:"https://unsplash.com/license",children:"freely-usable images"}),"."]}),Object(n.jsx)("p",{className:"main__container__header__text",children:"Powered by creators everywhere."})]}),Object(n.jsx)(V,{}),Object(n.jsx)("section",{className:"main__container__trending",children:Object(n.jsxs)("p",{className:"main__container__trending__text",children:[Object(n.jsx)("span",{children:"Trending:"}),Object.keys(O).map((function(e,t){return Object(n.jsxs)("span",{className:"main__container__trending__text__links",children:["\xa0",Object(n.jsx)(u.b,{to:"/photos/".concat(e),children:e}),t<Object.keys(O).length-1&&","]},e)}))]})})]})})}),I=(c(63),Object(l.f)((function(e){var t=e.history;return Object(a.useEffect)((function(){setTimeout((function(){return t.push("/")}),2e3)}),[]),Object(n.jsxs)("div",{className:"pageNotFound",children:[Object(n.jsx)("p",{children:"Page not found \ud83e\udd14"}),Object(n.jsx)("p",{children:"You will be redirected to the home page"})]})}))),C=c(10),T=c(20),P=c.n(T),L=c(32),q=function(e){var t=Object(a.useState)({}),c=Object(p.a)(t,2),n=c[0],s=c[1],o=Object(a.useState)(!1),r=Object(p.a)(o,2),i=r[0],u=r[1],l=Object(a.useState)(null),j=Object(p.a)(l,2),h=j[0],b=j[1];return Object(a.useEffect)((function(){var t=!1;return function(){var c=Object(L.a)(P.a.mark((function c(){return P.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return u(!0),c.next=3,v.a.get("".concat("https://api.unsplash.com").concat(e),{headers:{Authorization:"Client-ID ".concat("Si0FIuHyEBtocV_rfysvnHCKpCDnazvtCbf-lBMrigI")}}).then((function(e){t||(s(e),u(!1))})).catch((function(e){u(!1),e.response?b(e.response):b(e.message)}));case 3:case"end":return c.stop()}}),c)})));return function(){return c.apply(this,arguments)}}()(),function(){t=!0}}),[e]),[n,i,h]},G=(c(65),function(e){return e[0].toUpperCase()+e.slice(1,e.length)}),F=function(){return Object(n.jsx)("p",{children:"Something went wrong... \ud83d\ude05"})},M=(c(66),function(e){var t=e.id,c=e.setToggleModal,a=q("".concat(b).concat(t,"/")),s=Object(p.a)(a,3),o=s[0],r=s[1],i=s[2];return!r&&!i&&Object.keys(o).length>0?Object(n.jsx)("div",{role:"button",className:"modal",onClick:function(){return c(!1)},children:Object(n.jsxs)("div",{className:"modal__box",children:[Object(n.jsxs)("div",{className:"modal__box__user",children:[Object(n.jsx)("h3",{children:o.data.user.name}),Object(n.jsxs)("p",{children:["@",o.data.user.username]})]}),Object(n.jsx)("div",{className:"modal__box__img",children:Object(n.jsx)("img",{src:o.data.urls.regular,alt:o.data.alt_description})}),Object(n.jsxs)("div",{className:"modal__box__location",children:[Object(n.jsx)("i",{className:"icon-location"}),Object(n.jsx)("p",{children:null===o.data.location.city?"Location not found":"".concat(o.data.location.city,", ").concat(o.data.location.country)})]})]})}):null});M.defaultProps={id:"",setToggleModal:function(){}};var R=M,z=function(e){var t=e.image,c=t.id,s=t.url,o=t.tags,r=t.alt,i=Object(a.useState)(!1),l=Object(p.a)(i,2),j=l[0],h=l[1];return 4===Object.keys(t).length?Object(n.jsxs)(n.Fragment,{children:[Object(n.jsxs)("figure",{className:"photos__gallery__column__item",children:[Object(n.jsx)("img",{src:s,alt:r,className:"photos__gallery__column__item__img",onClick:function(){return h(!0)}}),Object(n.jsx)("div",{className:"photos__gallery__column__item__tags",children:o.length>0&&o.map((function(e){var t=e.title;return Object(n.jsx)(u.b,{to:"/photos/".concat(t),className:"photos__gallery__column__item__tags__item",children:G(t)},"".concat(c).concat(t))}))})]},c.toString()),j&&Object(n.jsx)(R,{id:c,setToggleModal:h})]}):Object(n.jsx)(F,{})};z.defaultProps={image:{}};var B=z,W=function(e){var t=e.images;return Object(n.jsx)("div",{className:"photos__gallery__column",children:t.map((function(e,t){return Object(n.jsx)(B,{image:e},"".concat(e.id).concat(t))}))})};W.defaultProps={images:[]};var D=W,H=function(e){var t=e.inputValue,c=Object(a.useState)({}),s=Object(p.a)(c,2),o=s[0],r=s[1];return Object(a.useEffect)((function(){return t.length>0&&v.a.get("".concat(j,"/words?ml=").concat(t,"&max=20")).then((function(e){r(e)})),function(){r({})}}),[t]),Object(n.jsx)("div",{className:"photos__similar",children:Object(n.jsx)("div",{className:"photos__similar__container",children:Object.keys(o).length>0&&o.data.length>0?o.data.map((function(e){var t=e.word;return Object(n.jsx)(u.b,{to:"/photos/".concat(t),className:"photos__similar__container__item",children:t},t)})):null})})},J=function(e){var t=e.match.params.query,c=Object(a.useState)([]),s=Object(p.a)(c,2),o=s[0],r=s[1],i=Object(a.useState)([]),u=Object(p.a)(i,2),l=u[0],j=u[1],b=Object(a.useState)([]),O=Object(p.a)(b,2),f=O[0],m=O[1],g=Object(a.useState)(1),x=Object(p.a)(g,2),v=x[0],y=x[1],N=Object(a.useState)(0),w=Object(p.a)(N,2),S=w[0],k=w[1],E=q("".concat(h,"?query=").concat(t,"&per_page=12&page=").concat(v)),I=Object(p.a)(E,3),T=I[0],P=I[1],L=I[2],M=Object(a.useRef)(),R=Object(a.useState)(window.innerWidth),z=Object(p.a)(R,2),B=z[0],W=z[1],J=function(){y(v+1)},U=new IntersectionObserver((function(e){if(e[0].intersectionRatio>0){var t=setTimeout(J,1e3);k(t)}}));return window.addEventListener("resize",(function(){W(window.innerWidth)})),Object(a.useEffect)((function(){r([]),j([]),m([]),y(1)}),[t]),Object(a.useEffect)((function(){return P||void 0===T.data||T.data.total_pages>=v&&(!function(){var e=[],t=[],c=[];T.data.results.forEach((function(n,a){var s=n.id,o=n.urls,r=n.tags,i=n.alt_description,u={id:s,url:o.small,tags:r,alt:i};a%3===0?e.push(u):a%2===0?t.push(u):c.push(u)})),r([].concat(Object(C.a)(o),e)),j([].concat(Object(C.a)(l),t)),m([].concat(Object(C.a)(f),c))}(),!L&&U.observe(M.current)),function(){U.disconnect(),clearTimeout(S)}}),[P]),Object(n.jsx)("div",{className:"wrapper",children:Object(n.jsxs)("div",{className:"photos",children:[Object(n.jsx)("div",{className:"photos__search",children:Object(n.jsx)(V,{query:t,isGray:!0})}),L?Object(n.jsx)(F,{}):Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)("h1",{className:"photos__title",children:G(t)}),Object(n.jsx)(H,{inputValue:t}),0===o.length&&!P&&Object(n.jsx)("p",{children:"No pictures with search phrase \ud83d\ude15"}),Object(n.jsxs)("div",{className:"photos__gallery",children:[Object(n.jsx)(D,{images:B<_?[].concat(Object(C.a)(o),Object(C.a)(l),Object(C.a)(f)):B<d?[].concat(Object(C.a)(o),Object(C.a)(f.slice(0,f.length/2))):o}),B>_&&Object(n.jsx)(D,{images:B<d?[].concat(Object(C.a)(l),Object(C.a)(f.slice(f.length/2))):l}),B>d&&Object(n.jsx)(D,{images:f})]})]}),Object(n.jsx)("div",{ref:M,style:{width:100,height:100}})]})})},U=function(){return Object(n.jsx)(u.a,{basename:"".concat("/photo-search-app","/"),children:Object(n.jsxs)(l.c,{children:[Object(n.jsx)(l.a,{exact:!0,path:"/",component:E}),Object(n.jsx)(l.a,{exact:!0,path:"/photos/:query",render:function(e){return Object(n.jsx)(J,Object(i.a)({},e))}}),Object(n.jsx)(l.a,{exact:!0,path:"*",component:I})]})})};c(67),c(68);r.a.render(Object(n.jsx)(s.a.StrictMode,{children:Object(n.jsx)(U,{})}),document.getElementById("root"))}},[[69,1,2]]]);
//# sourceMappingURL=main.1f3357dd.chunk.js.map